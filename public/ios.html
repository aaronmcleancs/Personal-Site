<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Showcase - RepBook-DemoServer</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/showcase.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://kit.fontawesome.com/ca7f2ffa51.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <div class="icon"><img src="images/blurIcon.png" height="27px" width="27px" alt="Logo"></div>
        </div>
        <a href="index.html">Home</a>
        <a href="#overview">Overview</a>
    </div>

    <div class="showcase__hero">
        <div class="showcase__wrapper">
            <h1 class="animate__animated animate__fadeIn">RepBook</h1>
            <p class="animate__animated animate__fadeIn animate__delay-1s">Full Stack iOS Fitness Tracking Application with RESTful API support.</p>
        </div>
    </div>

    <div class="showcase__content">
        <section id="overview" class="showcase__section">
            <h2>Project Overview</h2>
            <p>RepBook-DemoServer is a backend server for a full-stack iOS fitness tracking application. It provides a personal dashboard for users, allowing them to build workouts, interact with an AI assistant, and manage their fitness metrics through a RESTful API. This project utilizes Appleâ€™s Keychain for secure authentication, ensuring user data remains protected.

            At the core of this project is the development of a robust backend service which interfaces with an iOS client application. The system has been architected to handle the computational demands of fitness data processing, real-time updates, and user interactions with machine learning models. Apple's Keychain provides the assurance of secure, encrypted storage of sensitive user credentials, enhancing the overall security profile of the application.</p>
        </section>

        <section id="features" class="showcase__section">
            <h2>Key Features</h2>
            <ul>
                <li>Provides secure login and signup functionality using bcrypt and PostgreSQL.</li>
                <li>RESTful API facilitates user data management and workout tracking.</li>
                <div class="code-sample">
                    <pre><code class="language-javascript">
// Express.js route handler
app.post('/login', async (req, res) => {
    try {
        const { email, username, password } = req.body;
        let query, values;
        if (email) {
            query = 'SELECT member_id, password, auth_key FROM members WHERE email = $1';
            values = [email];
        } else if (username) {
            query = 'SELECT member_id, password, auth_key FROM members WHERE username = $1';
            values = [username];
        } else {
            return res.status(400).send('Email or username is required');
        }

         const result = await pool.query(query, values);
        if (result.rows.length > 0) {
            const user = result.rows[0];
            const match = await bcrypt.compare(password, user.password);

            if (match) {
                res.json({ member_id: user.member_id, auth_key: user.auth_key });
            } else {
                res.status(401).send('Invalid credentials');
            }
        } else {
            res.status(401).send('Invalid credentials');
        }
    } catch (err) {
        console.error(`Error during login: ${err.message}`);
        res.status(500).send(err.message);
    }
});
                    </code></pre>
                <li>AI assistant for customized fitness recommendations and tracking.</li>
                <li>Apple Keychain integration for secure storage and retrieval of user authentication tokens on iOS.</li>
                <pre><code class="language-javascript">
import Foundation
import Security

class KeychainManager {
    static func save(_ data: Data, service: String, account: String) -> OSStatus {
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrService as String: service,
            kSecAttrAccount as String: account,
            kSecValueData as String: data
        ]
        SecItemDelete(query as CFDictionary)
        return SecItemAdd(query as CFDictionary, nil)
    }

    static func load(service: String, account: String) -> Data? {
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrService as String: service,
            kSecAttrAccount as String: account,
            kSecReturnData as String: kCFBooleanTrue!,
            kSecMatchLimit as String: kSecMatchLimitOne
        ]

        var item: CFTypeRef?
        let status = SecItemCopyMatching(query as CFDictionary, &item)
        guard status == noErr else { return nil }

        return (item as? Data)
    }

    static func loadAuthKey() -> String? {
        guard let authKeyData = load(service: "YourAppService", account: "authKey"),
                let authKey = String(data: authKeyData, encoding: .utf8) else {
            return nil
        }
        return authKey
    }
}
                                    </code></pre>
            </ul>
        </section>

        <section id="methodology" class="showcase__section">
            <h2>Methodology and Architecture</h2>
<p>The core of RepBook-DemoServer's functionality is its RESTful API, which manages user data and workout tracking. REST provides a stateless architecture, separating client and server interactions, supporting multiple backends, and ensuring efficient scalability.

User authentication is secured with bcrypt, which uses the Blowfish cipher for computationally expensive password hashing. This approach defends against dictionary and brute-force attacks, securing credentials in the PostgreSQL database:
\[
y = \text{bcrypt}(x, \text{salt})
\]

Machine learning drives personalized fitness recommendations, implemented as microservices for scalable deployment. Apple Keychain integration further enhances security, using cryptographic storage to protect user credentials on iOS.</p>

<h2>Stack</h2>
<div class="tech-icons">
    <i class="fab fa-node-js"></i>
    <i class="fab fa-swift"></i>
    <i class="fas fa-database"></i>
</div>
<p>This project utilizes Node.js for its scalable backend, PostgreSQL for secure data management, and Swift for high-performance iOS applications. Security measures, such as bcrypt for hashing and Keychain for secure storage, provide strong data protection.</p>

        <section id="gallery" class="showcase__section">
            <h2>Project Gallery</h2>
            <div class="image-gallery">
                <img src="images/ios1.png" alt="Project screenshot 1">
            </div>
        </section>
    </div>

    <div class="showcase__cta">
        <a href="https://github.com/aaronmcleancs/RepBook-DemoServer" class="button">View on GitHub</a>
        <a href="#" class="button">Live Demo</a>
    </div>
    <div style="text-align: center; margin-top: 20px; margin-bottom: 20px;">
        <a href="https://opensource.org/licenses/MIT" style="color: rgb(113, 113, 113); font-size: small;" target="_blank;">
            @Aaron McLean
        </a>
    </div>
    <div class="fullscreen-viewer">
        <img src="" alt="Fullscreen image" class="fullscreen-image">
        <div class="fullscreen-nav">
            <button class="fullscreen-prev">&lt;</button>
            <button class="fullscreen-next">&gt;</button>
        </div>
        <button class="fullscreen-close">&times;</button>
    </div>

    <script>
        const imageGallery = document.querySelector('.image-gallery');
        const fullscreenViewer = document.querySelector('.fullscreen-viewer');
        const fullscreenImage = document.querySelector('.fullscreen-image');
        const prevButton = document.querySelector('.fullscreen-prev');
        const nextButton = document.querySelector('.fullscreen-next');
        const closeButton = document.querySelector('.fullscreen-close');
        let currentImageIndex = 0;
        const images = Array.from(imageGallery.querySelectorAll('img'));

        function openFullscreen(index) {
            currentImageIndex = index;
            fullscreenImage.src = images[index].src;
            fullscreenViewer.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeFullscreen() {
            fullscreenViewer.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function showNextImage() {
            currentImageIndex = (currentImageIndex + 1) % images.length;
            fullscreenImage.src = images[currentImageIndex].src;
        }

        function showPrevImage() {
            currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
            fullscreenImage.src = images[currentImageIndex].src;
        }

        images.forEach((img, index) => {
            img.addEventListener('click', () => openFullscreen(index));
        });

        closeButton.addEventListener('click', closeFullscreen);
        nextButton.addEventListener('click', showNextImage);
        prevButton.addEventListener('click', showPrevImage);

        fullscreenViewer.addEventListener('click', (e) => {
            if (e.target === fullscreenViewer) {
                closeFullscreen();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (fullscreenViewer.style.display === 'flex') {
                if (e.key === 'Escape') closeFullscreen();
                if (e.key === 'ArrowRight') showNextImage();
                if (e.key === 'ArrowLeft') showPrevImage();
            }
        });
    </script>
    <script src="js/showcase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</body>
</html>